name: Cypress Tests
on: [push]
jobs: 
  cypress-run:
    runs-on: ubuntu-latest
    steps: 
    - name: Checkout
      uses: actions/checkout@v3.0.1
    - name: Cypress.io
      uses: cypress-io/github-action@v2.9.7
    - name: Start containers
      run: docker-compose up
    - name: Install node
      uses: actions/setup-node@v1
      with:
        node-version: 17.x
    - name: Install dependencies
      run: npm install
    - name: Run tests
      run: npm run test
    - name: Stop containers
      if: always()
      run: docker-compose down
